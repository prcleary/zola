<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self';script-src 'self' 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://prcleary.github.io/zola/ name=base><title>
Wikipaulia | Incidence rates in DHIS 2</title><link title="Wikipaulia - Atom Feed" href=https://prcleary.github.io/zola/atom.xml rel=alternate type=application/atom+xml><link href="https://prcleary.github.io/zola/custom_subset.css?h=0b9535a28bc3d5bf2321" rel=stylesheet><link href="https://prcleary.github.io/zola/main.css?h=3716ab3457d2dd050b3c" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="An epidemiologist dabbles in statistics, coding, open source software, the cloud and AI." name=description><meta content="An epidemiologist dabbles in statistics, coding, open source software, the cloud and AI." property=og:description><meta content="Incidence rates in DHIS 2" property=og:title><meta content=article property=og:type><meta content=en_GB property=og:locale><meta content=https://prcleary.github.io/zola/notes/DHIS2/incidence-rates-in-dhis-2/ property=og:url><meta content=Wikipaulia property=og:site_name><noscript><link href=https://prcleary.github.io/zola/no_js.css rel=stylesheet></noscript><script src=https://prcleary.github.io/zola/js/initializeTheme.min.js></script><script defer src=https://prcleary.github.io/zola/js/themeSwitcher.min.js></script><script src="https://prcleary.github.io/zola/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body class=use-sans-serif><a href=#main-content id=skip-link>Skip to content</a><header><nav class=navbar><div class=nav-title><a class=home-title href=https://prcleary.github.io/zola/>Wikipaulia</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://prcleary.github.io/zola/blog/>blog </a><li><a class="nav-links no-hover-padding" href=https://prcleary.github.io/zola/archive/>archive </a><li><a class="nav-links no-hover-padding" href=https://prcleary.github.io/zola/notes/>notes </a><li><a class="nav-links no-hover-padding" href=https://prcleary.github.io/zola/about/>about </a><li class=menu-icons-container><ul class=menu-icons-group><li class="js menu-icon"><div aria-label="Click or press $SHORTCUT to open search" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" id=search-button role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></ul></ul></div></nav></header><div class=content id=main-content><main><article class=h-entry><h1 class="p-name article-title">Incidence rates in DHIS 2</h1><a class="u-url u-uid" href=https://prcleary.github.io/zola/notes/DHIS2/incidence-rates-in-dhis-2/></a><ul class=meta><span class="hidden p-author h-card"> <a title="Paul Cleary" class=u-url href=https://prcleary.github.io/zola/ rel=author>Paul Cleary</a> </span><li title="629 words">4 min read</ul><section class="e-content body"><p>Fair comparison of disease activity across areas typically requires calculation of rates. Here are some notes on uploading denominator data into DHIS 2 and creating indicators for incidence.<p>We were tasked with creating disease incidence rates using estimated health facility catchment populations as denominators. After many failed attempts at cleaning up some data files I had been sent, that had many spelling variations in the transliteration of names of health facilities, I decided to create a template and ask partners to complete it.<p>I downloaded Organisation Unit and Organisation Unit Level from the Import/Export app (Metadata export tab) as uncompressed JSON. This can then be read into R and put into more manageable form with:<pre class="language-r z-code" data-lang=r><code class=language-r data-lang=r><span class="z-source z-r"><span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">library</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>data.table<span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span><span class="z-source z-r"><span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">library</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>jsonlite<span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span><span class="z-source z-r"><span class="z-meta z-function z-name z-r"><span class="z-entity z-name z-function z-r">extract_list_elements</span> </span><span class="z-meta z-function z-r"><span class="z-keyword z-operator z-assignment z-r">&lt;-</span> </span><span class="z-meta z-function z-r"><span class="z-storage z-type z-function z-r">function</span></span><span class="z-meta z-function z-parameters z-r"><span class="z-punctuation z-section z-parameters z-begin z-r">(</span><span class="z-variable z-parameter z-r">x</span><span class="z-punctuation z-section z-parameters z-end z-r">)</span></span> <span class="z-punctuation z-section z-braces z-begin z-r">{</span>
</span><span class="z-source z-r">  <span class="z-meta z-function-call z-name z-r"><span class="z-storage z-type z-r">list</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">    <span class="z-variable z-parameter z-r">name</span> <span class="z-keyword z-operator z-assignment z-r">=</span> x<span class="z-keyword z-accessor z-dollar z-r">$</span>name<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">    <span class="z-variable z-parameter z-r">shortName</span> <span class="z-keyword z-operator z-assignment z-r">=</span> x<span class="z-keyword z-accessor z-dollar z-r">$</span>shortName<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">    <span class="z-variable z-parameter z-r">parent_id</span> <span class="z-keyword z-operator z-assignment z-r">=</span> x<span class="z-keyword z-accessor z-dollar z-r">$</span>parent<span class="z-keyword z-accessor z-dollar z-r">$</span>id<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">    <span class="z-variable z-parameter z-r">path</span> <span class="z-keyword z-operator z-assignment z-r">=</span> x<span class="z-keyword z-accessor z-dollar z-r">$</span>path<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">    <span class="z-variable z-parameter z-r">id</span> <span class="z-keyword z-operator z-assignment z-r">=</span> x<span class="z-keyword z-accessor z-dollar z-r">$</span>id<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">    <span class="z-variable z-parameter z-r">level</span> <span class="z-keyword z-operator z-assignment z-r">=</span> x<span class="z-keyword z-accessor z-dollar z-r">$</span>level
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span><span class="z-source z-r"><span class="z-punctuation z-section z-braces z-end z-r">}</span>
</span><span class="z-source z-r">ou_json <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> <span class="z-meta z-function-call z-name z-r"><span class="z-variable z-function z-r">read_json</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span><span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>metadata.json<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span><span class="z-keyword z-accessor z-dollar z-r">$</span>organisationUnits
</span><span class="z-source z-r">ou_list <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">lapply</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>ou_json<span class="z-punctuation z-separator z-arguments z-r">,</span> extract_list_elements<span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span><span class="z-source z-r">ou_data <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> <span class="z-meta z-function-call z-name z-r"><span class="z-variable z-function z-r">rbindlist</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>ou_list<span class="z-punctuation z-separator z-arguments z-r">,</span> <span class="z-variable z-parameter z-r">fill</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-constant z-language z-r">TRUE</span><span class="z-punctuation z-separator z-arguments z-r">,</span> <span class="z-variable z-parameter z-r">use.names</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-constant z-language z-r">TRUE</span><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span></code></pre><p>You now have a list of all the organisation units in your system and need to filter to health facilities and show the hierarchy. In our system, organisation units can have the following levels: national (1), provincial (2), district (3), <a class=external href=https://en.wikipedia.org/wiki/Tehsil>tehsil</a> (4), <a class=external href=https://en.wikipedia.org/wiki/Union_councils_of_Pakistan>union council</a> (5) and health facility (6).<p>I then divided the data by geographical level:<pre class="language-r z-code" data-lang=r><code class=language-r data-lang=r><span class="z-source z-r">hf_data <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> ou_data<span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-begin z-r">[</span></span><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r">level <span class="z-keyword z-operator z-other z-r">%in%</span> <span class="z-constant z-numeric z-float z-decimal z-r">6</span></span></span><span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-end z-r">]</span></span>
</span><span class="z-source z-r">uc_data <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> ou_data<span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-begin z-r">[</span></span><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r">level <span class="z-keyword z-operator z-other z-r">%in%</span> <span class="z-constant z-numeric z-float z-decimal z-r">5</span></span></span><span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-end z-r">]</span></span>
</span><span class="z-source z-r">tehsil_data <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> ou_data<span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-begin z-r">[</span></span><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r">level <span class="z-keyword z-operator z-other z-r">%in%</span> <span class="z-constant z-numeric z-float z-decimal z-r">4</span></span></span><span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-end z-r">]</span></span>
</span><span class="z-source z-r">district_data <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> ou_data<span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-begin z-r">[</span></span><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r">level <span class="z-keyword z-operator z-other z-r">%in%</span> <span class="z-constant z-numeric z-float z-decimal z-r">3</span></span></span><span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-end z-r">]</span></span>
</span><span class="z-source z-r">province_data <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> ou_data<span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-begin z-r">[</span></span><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r">level <span class="z-keyword z-operator z-other z-r">%in%</span> <span class="z-constant z-numeric z-float z-decimal z-r">2</span></span></span><span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-end z-r">]</span></span>
</span></code></pre><p>The next horrendous bit of code just joins these all up so that you can see the full hierarchy, and saves it as a CSV file:<pre class="language-r z-code" data-lang=r><code class=language-r data-lang=r><span class="z-source z-r">hf_data<span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-begin z-r">[</span></span><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-punctuation z-separator z-parameters z-r">,</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">c</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>ignore<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>national_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>province_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>district_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>tehsil_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>unioncouncil_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>healthfacility_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span> <span class="z-keyword z-operator z-other z-r">:=</span> <span class="z-meta z-function-call z-name z-r"><span class="z-variable z-function z-r">tstrsplit</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>path<span class="z-punctuation z-separator z-arguments z-r">,</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>/<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span></span></span><span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-end z-r">]</span></span>
</span><span class="z-source z-r">hf_data<span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-begin z-r">[</span></span><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-punctuation z-separator z-parameters z-r">,</span> name_national <span class="z-keyword z-operator z-other z-r">:=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>Pakistan<span class="z-punctuation z-definition z-string z-end z-r">'</span></span></span></span><span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-end z-r">]</span></span>
</span><span class="z-source z-r">hf_data2 <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">merge</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  hf_data<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  province_data<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">by.x</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>province_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">by.y</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">all.x</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-constant z-language z-r">TRUE</span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">suffixes</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">c</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span><span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span><span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>_province<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span><span class="z-source z-r">hf_data3 <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">merge</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  hf_data2<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  district_data<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">by.x</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>district_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">by.y</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">all.x</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-constant z-language z-r">TRUE</span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">suffixes</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">c</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span><span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span><span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>_district<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span><span class="z-source z-r">hf_data4 <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">merge</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  hf_data3<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  tehsil_data<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">by.x</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>tehsil_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">by.y</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">all.x</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-constant z-language z-r">TRUE</span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">suffixes</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">c</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span><span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span><span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>_tehsil<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span><span class="z-source z-r">hf_data5 <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">merge</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  hf_data4<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  uc_data<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">by.x</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>unioncouncil_id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">by.y</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>id<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">all.x</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-constant z-language z-r">TRUE</span><span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">suffixes</span> <span class="z-keyword z-operator z-assignment z-r">=</span> <span class="z-meta z-function-call z-name z-r"><span class="z-support z-function z-r">c</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span><span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span><span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-separator z-arguments z-r">,</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>_uc<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span></span><span class="z-source z-r"><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span><span class="z-source z-r">hf_data_final <span class="z-keyword z-operator z-assignment z-r">&lt;-</span> hf_data5<span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-begin z-r">[</span></span><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-punctuation z-separator z-parameters z-r">,</span> <span class="z-meta z-function-call z-name z-r"><span class="z-variable z-function z-r">.</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  name_national<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  name_province<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  shortName_province<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  name_district<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  shortName_district<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  name_tehsil<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  shortName_tehsil<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  name_uc<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  shortName_uc<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">name_hf</span> <span class="z-keyword z-operator z-assignment z-r">=</span> name<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">shortName_hf</span> <span class="z-keyword z-operator z-assignment z-r">=</span> shortName<span class="z-punctuation z-separator z-arguments z-r">,</span>
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r">  <span class="z-variable z-parameter z-r">hf_id</span> <span class="z-keyword z-operator z-assignment z-r">=</span> id
</span></span></span></span><span class="z-source z-r"><span class="z-meta z-item-access z-r"><span class="z-meta z-item-access z-arguments z-r"><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span></span></span><span class="z-meta z-item-access z-r"><span class="z-punctuation z-section z-brackets z-single z-end z-r">]</span></span>
</span><span class="z-source z-r"><span class="z-meta z-function-call z-name z-r"><span class="z-variable z-function z-r">fwrite</span></span><span class="z-meta z-function-call z-arguments z-r"><span class="z-punctuation z-section z-arguments z-begin z-r">(</span>hf_data_final<span class="z-punctuation z-separator z-arguments z-r">,</span> <span class="z-string z-quoted z-single z-r"><span class="z-punctuation z-definition z-string z-begin z-r">'</span>dhis2_hf_details.csv<span class="z-punctuation z-definition z-string z-end z-r">'</span></span><span class="z-punctuation z-section z-arguments z-end z-r">)</span></span>
</span></code></pre><p>I could then create a nicely formatted Excel spreadsheet out of this and send it out for completion. I added a column for catchment population denominator and asked for the other columns not to changed. After some months most of the data was in, so I could upload it into DHIS 2.<p>In DHIS 2 I created an aggregate data element for the denominator values, of type “Number” and (very important) aggregation type of “Average”. I took note of the ID of the data element created.<p>I could then manually reformat the returned spreadsheet into the format required for import into DHIS 2. It needs to be in CSV format and to have the following structure (first two lines shown only):<table><thead><tr><th>dataelement<th>period<th>orgunit<th>categoryoptioncombo<th>attributeoptioncombo<th>value<th>storedby<th>lastupdated<th>comment<th>followup<th>deleted<tbody><tr><td>gEzZS4YRmT0<td>2025<td>sgVCYsjiu5i<td>HllvX50cXC0<td>HllvX50cXC0<td>2150<td>Paul Cleary<td><td>Requires annual refresh<td><td></table><p><code>categoryoptioncombo</code> and <code>attributeoptioncombo</code> can be as shown, but add your own IDs and values for the rest.<p>Using the Import/Export app (Data import tab) I imported this into DHIS 2 (select CSV; tick “First row is a header”) after a successful dry run import. After running analytics this was available for analysis and I presented it in some charts in a dashboard for checking (some of the numbers were surprisingly large).<p>Before you can create an indicator for a rate, you need to create an indicator type - this is just a factor that the rate will be multipled with for presentation. I created an indicator type called “Per 100,000” with a factor of 100,000.<p>I created a rate indicator for acute watery diarrhoea for starters, specifying presentation with 2 decimal places, the “Per 100,000” indicator type and the numerator (acute watery diarrhoea cases) and denominator (catchment population). If you prefer, you can “annualise” the rate (which for a weekly rate just means multiplying it by 52). After running analytics again you can show your indicator in charts and dashboards.<p>There are a couple of minor issues to mention. The denominator will need to be updated for 2026 - I have set a calendar reminder. Also, some of our health facilities appear more than once in the list, presumably because their catchment populations span multiple administrative areas, and there is also a risk of double counting (e.g. for hospitals covering the same population as health facilities), so this is really only for looking at rates at health facility level - you can’t aggregate it up.<p>I am now looking at using the API to create all the remaining rate indicators required.</section></article></main><div id=button-container><a title="Go to the top of the page" class=no-hover-padding href=# id=top-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><link href=https://prcleary.github.io/zola/katex.min.css rel=stylesheet><script defer src=https://prcleary.github.io/zola/js/katex.min.js></script><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://prcleary.github.io/zola/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://prcleary.github.io/zola/atom.xml> <img alt=feed loading=lazy src=https://prcleary.github.io/zola/social_icons/rss.svg title=feed> </a><li class=js><a class="nav-links no-hover-padding social" data-encoded-email="YmxvZ3NwYW1AcGF1bGNsZWFyeS5uZXQ=" href=#><img alt=email loading=lazy src=https://prcleary.github.io/zola/social_icons/email.svg title=email> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://bsky.app/profile/paulcleary.net> <img alt=bluesky loading=lazy src=https://prcleary.github.io/zola/social_icons/bluesky.svg title=bluesky> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/prcleary/> <img alt=github loading=lazy src=https://prcleary.github.io/zola/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://letterboxd.com/rusticana/> <img alt=letterboxd loading=lazy src=https://prcleary.github.io/zola/social_icons/letterboxd.svg title=letterboxd> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://infosec.exchange/@carupalley> <img alt=mastodon loading=lazy src=https://prcleary.github.io/zola/social_icons/mastodon.svg title=mastodon> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://orcid.org/0000-0001-9335-5422> <img alt=orcid loading=lazy src=https://prcleary.github.io/zola/social_icons/orcid.svg title=orcid> </a></ul></nav><nav class=nav-navs></nav><div class=credits><small> <p><p>Wikipaulia © 2026 Paul Cleary | Unless otherwise noted, the content in this website is available under the <a class=external href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a> license.</p> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> | <a href=https://github.com/prcleary/zola> Site source </a></small></div></section><script async src=https://prcleary.github.io/zola/js/decodeMail.min.js></script><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><h1 class=visually-hidden id=modalTitle>Search</h1><div id=modal-content><div id=searchBar><div aria-hidden=true class=search-icon><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search… role=combobox spellcheck=false><div class="close-icon interactive-icon" title="Clear search" id=clear-search role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div></div><div id=results-container><div id=results-info><span id=zero_results> No results</span><span id=one_results> $NUMBER result</span><span id=many_results> $NUMBER results</span><span id=two_results> $NUMBER results</span><span id=few_results> $NUMBER results</span></div><div id=results role=listbox></div></div></div></div></footer>